<!DOCTYPE html>
<html lang="pt-BR" xmlns:th="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" th:href="@{/css/index.css}" />
    <title>Login</title>
</head>
<body>
<div class="auth-container">
    <div class="auth-header">
        <a href="/">
            <div class="store-logo">
                <div class="store-logo-icon">U</div>
                <div class="store-name">UniWare</div>
            </div>
        </a>
        <p th:text="${success}"></p>
        <h2 class="auth-title">Entre na sua conta</h2>
        <p class="error" th:text="${userNotLoggedError}" style="color: blue;"></p>
        <p class="error" th:text="${loginNotFound}" style="color: red;"></p>
    </div>

    <form class="auth-form" action="/login" method="post">
        <div class="form-group">
            <label class="form-label" for="email">Email</label>
            <input class="form-input" type="email" name="email" id="email" placeholder="Digite seu email" required>
        </div>

        <div class="form-group">
            <label class="form-label" for="password">Senha</label>
            <input class="form-input" type="password" name="password" id="password" placeholder="Digite sua senha" required>
        </div>

        <button class="submit-btn" type="submit">Entrar</button>
    </form>

    <div class="auth-footer">
        <div class="auth-links">
            <a href="/register" class="auth-link primary-link">Não tem conta? Cadastre-se</a>
        </div>
    </div>

    <div class="auth-footer">
        <div class="auth-links">
            <a href="/passwordChange" class="auth-link primary-link">Esqueceu sua senha?</a>
        </div>
    </div>
</div>

<script>
    (function () {
      const passwordInput = document.getElementById('password');
      if (!passwordInput) return;

      const parent = passwordInput.parentElement;
      parent.style.position = 'relative';

      // Cria o ícone do olho
      const eye = document.createElement('span');
      eye.classList.add('toggle-password');
      eye.innerHTML = getEyeSVG(false);
      parent.appendChild(eye);

      eye.addEventListener('click', () => {
        const visible = passwordInput.type === 'text';
        passwordInput.type = visible ? 'password' : 'text';
        eye.innerHTML = getEyeSVG(!visible);
      });

      // estilo do olhinho
      eye.style.position = 'absolute';
      eye.style.right = '10px';
      eye.style.top = '50%';
      eye.style.transform = 'translateY(-50%)';
      eye.style.cursor = 'pointer';
      eye.style.width = '20px';
      eye.style.height = '20px';

      // Função auxiliar para o SVG do olho
      function getEyeSVG(open) {
        const size = 18;
        if (open) {
          return `
            <svg width="${size}" height="${size}" viewBox="0 0 24 24" fill="none" stroke="#424242" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M1 12s4-7 11-7 11 7 11 7-4 7-11 7-11-7-11-7z"/>
              <circle cx="12" cy="12" r="3"/>
            </svg>`;
        } else {
          return `
            <svg width="${size}" height="${size}" viewBox="0 0 24 24" fill="none" stroke="#424242" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M17.94 17.94A10.94 10.94 0 0 1 12 19c-7 0-11-7-11-7a21.59 21.59 0 0 1 5.06-5.94"/>
              <path d="M1 1l22 22"/>
            </svg>`;
        }
      }
    })();
</script>

</body>
</html>